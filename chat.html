<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Career Assistant | Pathfinder</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --accent-color: #3b82f6;
            --text-color: #1f2937;
            --light-text: #ffffff;
            --light-bg: #f8fafc;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --navbar-bg: #1e293b;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Navbar Styles */
        .navbar {
            background-color: var(--navbar-bg);
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            color: white;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .logo i {
            margin-right: 0.5rem;
            color: var(--primary-color);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: #cbd5e1;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 0.5rem 0;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: white;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-right .notification-btn,
        .nav-right .profile-btn {
            background: none;
            border: none;
            color: #cbd5e1;
            font-size: 1.1rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .nav-right .notification-btn:hover,
        .nav-right .profile-btn:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .for-you-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .for-you-btn:hover {
            background-color: var(--primary-dark);
        }

        .hamburger {
            display: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
        }

        /* Chat Styles */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1000px;
            margin: 30px auto;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            height: calc(100vh - 150px);
        }

        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h2 {
            font-size: 20px;
            font-weight: 600;
        }

        .chat-header .status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background-color: #10b981;
            border-radius: 50%;
        }

        .chat-window {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background-color: var(--light-bg);
        }

        .message {
            max-width: 75%;
            padding: 12px 16px;
            margin-bottom: 15px;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: var(--light-text);
            border-radius: 18px;
            border-bottom-right-radius: 4px;
        }

        .bot-message {
            align-self: flex-start;
            background-color: white;
            color: var(--text-color);
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #e5e7eb;
            background-color: white;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #d1d5db;
            border-radius: 20px;
            outline: none;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
        }

        .chat-input input:focus {
            border-color: var(--primary-color);
        }

        .chat-input button {
            margin-left: 10px;
            background-color: var(--primary-color);
            color: white;
            padding: 0 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Inter', sans-serif;
        }

        .chat-input button:hover {
            background-color: var(--primary-dark);
        }

        .chat-guidance {
            padding: 15px;
            background-color: rgba(37, 99, 235, 0.1);
            border-left: 3px solid var(--primary-color);
            margin-bottom: 15px;
            font-size: 14px;
            border-radius: 0 8px 8px 0;
        }

        .footer {
            background-color: var(--navbar-bg);
            color: #cbd5e1;
            text-align: center;
            padding: 1rem;
            margin-top: auto;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hamburger {
                display: block;
            }

            .chat-container {
                margin: 10px;
                height: calc(100vh - 120px);
            }

            .navbar {
                padding: 0.75rem 1rem;
            }

            .message {
                max-width: 90%;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-compass"></i>
            Pathfinder
        </div>
        <ul class="nav-links">
            <li><a href="./colleges.html">Colleges</a></li>
            <li><a href="./career_paths.html">Career Paths</a></li>
            <li><a href="#roadmaps">Roadmaps</a></li>
            <li><a href="#study-groups">Study Groups</a></li>
            <li><a href="#others">Others</a></li>
        </ul>
        <div class="nav-right">
            <button class="notification-btn" title="Notifications">
                <i class="fas fa-bell"></i>
            </button>
            <button class="profile-btn" title="Profile">
                <i class="fas fa-user"></i>
            </button>
            <button class="for-you-btn">For You</button>
        </div>
        <div class="hamburger">
            <i class="fas fa-bars"></i>
        </div>
    </nav>

    <!-- Chat Container -->
    <div class="chat-container">
        <div class="chat-header">
            <h2><i class="fas fa-graduation-cap"></i> Career Guidance Assistant</h2>
            <div class="status">
                <div class="status-dot"></div>
                <span>Online</span>
            </div>
        </div>

        <div class="chat-guidance">
            <p><i class="fas fa-info-circle"></i> Hi there! I'm here to help students who have completed their 10th or 12th grade figure out their next steps. I'll ask about your interests, favorite subjects, strengths, and career dreams to suggest the best paths forward!</p>
        </div>

        <div class="chat-window" id="chat-window">
            <!-- Initial welcome message -->
            <div class="message bot-message">
                Hey there! ðŸŽ“ Congratulations on completing your studies! I'm your Pathfinder career assistant, and I'm here to help you discover amazing career paths that match who you are and what you love doing.

Whether you've just finished 10th or 12th grade, choosing your next step can feel overwhelming - but don't worry, we'll figure it out together!

To get started, could you tell me:
1. Have you completed 10th or 12th grade?
2. What subjects do you enjoy the most or find easiest?
3. What are some things you love doing in your free time?
            </div>
        </div>

        <div class="chat-input">
            <input type="text" id="input" placeholder="Share your thoughts here..." />
            <button onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
                Send
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 Pathfinder. Helping students discover their perfect career path.</p>
    </footer>

    <script>
        const chatWindow = document.getElementById("chat-window");
        const inputBox = document.getElementById("input");

        const apiKey = "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";
        const model = "openai/gpt-3.5-turbo";

        // Initialize conversation with a student-focused career guidance approach
        let conversationHistory = [
            { 
                role: "system", 
                content: `You are PathfinderBot, a friendly and encouraging career assistant specifically designed for Indian students who have completed their 10th or 12th grade and are unsure about their next steps.

                Your guidelines:
                1. Your primary goal is to help students discover career paths and educational options based on their interests, favorite subjects, strengths, and dreams.
                2. Always be encouraging, supportive, and understanding - many students feel overwhelmed at this stage.
                3. Ask about their grade completion (10th/12th), favorite subjects, hobbies, strengths, and any career dreams they might have.
                4. Provide specific, practical advice including:
                   - College course suggestions (Engineering, Medical, Commerce, Arts, etc.)
                   - Career options that match their profile
                   - Entrance exams they should consider
                   - Alternative paths like vocational training, skill development
                5. Consider the Indian education system - mention streams like Science (PCM/PCB), Commerce, Arts
                6. Be aware of popular career paths in India and emerging opportunities
                7. Offer actionable next steps and resources for learning more
                8. Keep responses conversational, friendly, and age-appropriate for teenagers
                9. Use encouraging language and emojis occasionally to keep it engaging
                10. If they seem confused or overwhelmed, reassure them that it's normal and they have time to figure things out`
            },
            { 
                role: "assistant", 
                content: "Hey there! ðŸŽ“ Congratulations on completing your studies! I'm your Pathfinder career assistant, and I'm here to help you discover amazing career paths that match who you are and what you love doing.\n\nWhether you've just finished 10th or 12th grade, choosing your next step can feel overwhelming - but don't worry, we'll figure it out together!\n\nTo get started, could you tell me:\n1. Have you completed 10th or 12th grade?\n2. What subjects do you enjoy the most or find easiest?\n3. What are some things you love doing in your free time?" 
            }
        ];

        // Track conversation state for students
        let conversationState = {
            askedAboutGrade: true,
            askedAboutSubjects: true,
            askedAboutInterests: true,
            askedAboutStrengths: false,
            askedAboutCareerDreams: false,
            providedSuggestions: false
        };

        // Capture the Enter key in the input field
        inputBox.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        });

        function appendMessage(sender, text) {
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("message", sender === "user" ? "user-message" : "bot-message");
            messageDiv.textContent = text;
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function updateConversationState(botMessage) {
            const lowerCaseMessage = botMessage.toLowerCase();
            
            // Check what the bot asked about in the most recent message
            if (!conversationState.askedAboutStrengths && 
                (lowerCaseMessage.includes("strength") || lowerCaseMessage.includes("good at") || lowerCaseMessage.includes("talent"))) {
                conversationState.askedAboutStrengths = true;
            }
            
            if (!conversationState.askedAboutCareerDreams && 
                (lowerCaseMessage.includes("dream") || lowerCaseMessage.includes("aspiration") || lowerCaseMessage.includes("want to become"))) {
                conversationState.askedAboutCareerDreams = true;
            }
            
            if (!conversationState.providedSuggestions &&
                (lowerCaseMessage.includes("suggest") || lowerCaseMessage.includes("recommend") || 
                 lowerCaseMessage.includes("consider") || lowerCaseMessage.includes("career option") ||
                 lowerCaseMessage.includes("stream") || lowerCaseMessage.includes("course"))) {
                conversationState.providedSuggestions = true;
            }
        }

        async function sendMessage() {
            const userInput = inputBox.value.trim();
            if (!userInput) {
                return;
            }

            appendMessage("user", userInput);
            inputBox.value = "";

            // Add user message to history
            conversationHistory.push({ role: "user", content: userInput });
            
            // Create and append a temporary "Thinking..." message
            const thinkingDiv = document.createElement("div");
            thinkingDiv.classList.add("message", "bot-message");
            thinkingDiv.textContent = "Thinking... ðŸ¤”";
            chatWindow.appendChild(thinkingDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;

            try {
                // Guide the conversation based on what information we still need
                let promptAddition = "";
                if (conversationState.askedAboutGrade && conversationState.askedAboutSubjects && 
                    conversationState.askedAboutInterests && !conversationState.askedAboutStrengths) {
                    promptAddition = "\n\nNow ask them about their strengths - what are they naturally good at or what do others compliment them on?";
                } else if (conversationState.askedAboutStrengths && !conversationState.askedAboutCareerDreams) {
                    promptAddition = "\n\nNow ask if they have any career dreams or if there's something they've always wanted to become.";
                } else if (conversationState.askedAboutCareerDreams && !conversationState.providedSuggestions) {
                    promptAddition = "\n\nBased on all the information they've shared, provide 3-4 specific career suggestions with educational paths (streams/courses) they should consider, along with entrance exams if relevant. Make it encouraging and actionable.";
                }
                
                // Add the guidance to the system message if needed
                if (promptAddition) {
                    conversationHistory[0].content += promptAddition;
                }

                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${apiKey}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: conversationHistory
                    })
                });

                const data = await response.json();
                const botReply = data.choices?.[0]?.message?.content || "Sorry, I'm having trouble connecting. Please try again! ðŸ˜…";

                // Update conversation state based on bot reply
                updateConversationState(botReply);
                
                // Add bot response to history
                conversationHistory.push({ role: "assistant", content: botReply });

                // Remove the "Thinking..." message
                thinkingDiv.remove();

                appendMessage("bot", botReply);

            } catch (err) {
                console.error("API error:", err);
                thinkingDiv.remove();
                appendMessage("bot", "I'm having trouble connecting right now. Please try again later! ðŸ”„");
            }
        }

        // Hamburger menu functionality
        document.querySelector('.hamburger').addEventListener('click', function() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('mobile-menu-active');
        });

        // Initialize the chat
        console.log("Student career guidance chat initialized! ðŸš€");
    </script>
</body>

</html>